<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koda Test - Direct HTML</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px; 
            background: #f9f9f9;
        }
        .test-box { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            margin: 15px 0; 
            border-left: 4px solid #007a62;
        }
        .success { border-left-color: #28a745; }
        .error { border-left-color: #dc3545; }
        .warning { border-left-color: #ffc107; }
        button {
            background: #007a62;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #005a43; }
        pre { background: #f1f1f1; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üß™ Koda Application Test</h1>
    
    <div class="test-box">
        <h3>üìç Current Location</h3>
        <p id="location">Loading...</p>
    </div>

    <div class="test-box">
        <h3>üîß Environment Check</h3>
        <div id="env-check">Checking...</div>
    </div>

    <div class="test-box">
        <h3>üåê API Test</h3>
        <button onclick="testAPI()">Test API Connection</button>
        <div id="api-result"></div>
    </div>

    <div class="test-box">
        <h3>üìÇ File Structure Test</h3>
        <button onclick="testFiles()">Test Asset Loading</button>
        <div id="file-result"></div>
    </div>

    <div class="test-box warning">
        <h3>‚ö†Ô∏è Diagnosis</h3>
        <p><strong>Upload this file to your S3 bucket as `test.html` and visit:</strong></p>
        <p><code>https://koda.kocreators.com/test.html</code></p>
        <p>This will help identify if the issue is with your React app or AWS configuration.</p>
    </div>

    <script>
        // Set location info
        document.getElementById('location').textContent = window.location.href;

        // Environment check
        function checkEnvironment() {
            const checks = {
                'JavaScript Enabled': typeof window !== 'undefined',
                'Local Storage': typeof localStorage !== 'undefined',
                'Fetch API': typeof fetch !== 'undefined',
                'Current Time': new Date().toISOString(),
                'User Agent': navigator.userAgent.substring(0, 50) + '...',
                'Screen Size': `${window.innerWidth}x${window.innerHeight}`
            };

            let html = '<ul>';
            for (const [key, value] of Object.entries(checks)) {
                const icon = value ? '‚úÖ' : '‚ùå';
                html += `<li>${icon} <strong>${key}:</strong> ${value}</li>`;
            }
            html += '</ul>';
            
            document.getElementById('env-check').innerHTML = html;
        }

        // API test
        async function testAPI() {
            const result = document.getElementById('api-result');
            result.innerHTML = 'üîÑ Testing API...';

            try {
                const response = await fetch('https://studio.api.plugger.ai/run', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': 'V3A3y007DBgtsqo7' // Your API key
                    },
                    body: JSON.stringify({
                        tool: 'stock photo',
                        term: 'test logo, plain white background',
                        promptEnhancing: true,
                        size: '1:1'
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    result.innerHTML = `‚úÖ API Working! Job ID: ${data.job_id || 'Unknown'}`;
                } else {
                    result.innerHTML = `‚ùå API Error: ${response.status} ${response.statusText}`;
                }
            } catch (error) {
                result.innerHTML = `‚ùå Network Error: ${error.message}`;
            }
        }

        // File test
        async function testFiles() {
            const result = document.getElementById('file-result');
            result.innerHTML = 'üîÑ Testing file access...';

            const testUrls = [
                'https://d3d8ucpm7p01n7.cloudfront.net/koda/assets/index-B5dY3KeC.js',
                'https://d3d8ucpm7p01n7.cloudfront.net/koda/assets/index-BFxHDbZN.css',
                'https://koda.kocreators.com/index.html'
            ];

            let html = '<ul>';
            for (const url of testUrls) {
                try {
                    const response = await fetch(url, { method: 'HEAD' });
                    const icon = response.ok ? '‚úÖ' : '‚ùå';
                    html += `<li>${icon} ${url} (${response.status})</li>`;
                } catch (error) {
                    html += `<li>‚ùå ${url} (Network Error)</li>`;
                }
            }
            html += '</ul>';
            
            result.innerHTML = html;
        }

        // Run environment check on load
        checkEnvironment();
    </script>
</body>
</html>